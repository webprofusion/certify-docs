"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3003],{60087:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>s,contentTitle:()=>c,default:()=>d,frontMatter:()=>a,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"deployment/tasks/apache","title":"Deployment Task - Deploy to Apache","description":"The Deploy to Apache task will export your certificate and the components you choose as a set of PEM format files.","source":"@site/docs/deployment/tasks/apache.md","sourceDirName":"deployment/tasks","slug":"/deployment/tasks/apache","permalink":"/docs/deployment/tasks/apache","draft":false,"unlisted":false,"editUrl":"https://github.com/webprofusion/certify-docs/edit/master/docs/deployment/tasks/apache.md","tags":[],"version":"current","frontMatter":{"id":"apache","title":"Deployment Task - Deploy to Apache"}}');var o=i(74848),r=i(28453);const a={id:"apache",title:"Deployment Task - Deploy to Apache"},c=void 0,s={},l=[{value:"Task Parameters",id:"task-parameters",level:2},{value:"Authentication",id:"authentication",level:3},{value:"File Paths",id:"file-paths",level:3},{value:"Output filepath for cert",id:"output-filepath-for-cert",level:4},{value:"Output filepath for key",id:"output-filepath-for-key",level:4},{value:"Output filepath for full chain",id:"output-filepath-for-full-chain",level:4},{value:"Output filepath for CA chain",id:"output-filepath-for-ca-chain",level:4},{value:"Apache Config",id:"apache-config",level:2},{value:"Restarting Apache",id:"restarting-apache",level:3},{value:"CA Preferred Chain",id:"ca-preferred-chain",level:3}];function h(e){const t={code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(t.p,{children:["The ",(0,o.jsx)(t.em,{children:"Deploy to Apache"})," task will export your certificate and the components you choose as a set of PEM format files."]}),"\n",(0,o.jsxs)(t.p,{children:["To use a certificate with your web server, the service you are targeting needs to know the certificate for your domain (",(0,o.jsx)(t.strong,{children:"Leaf or End-Entity Certificate"}),"), intermediate certificates from your CA (if any) and the ",(0,o.jsx)(t.strong,{children:"Private Key"})," that corresponds to the public key in the certificate. The app can produce the files you need but currently it does not automatically configure Apache to use them."]}),"\n",(0,o.jsx)(t.h2,{id:"task-parameters",children:"Task Parameters"}),"\n",(0,o.jsx)(t.h3,{id:"authentication",children:"Authentication"}),"\n",(0,o.jsxs)(t.p,{children:["This option lets you specify credentials if you are deploying to a remote server. If you are just deploying to the local machine leave this option set to ",(0,o.jsx)(t.em,{children:"Local"}),"."]}),"\n",(0,o.jsx)(t.p,{children:"To deploy to a remote server via SSH you can select the SSH option and provide/select the credentials to use."}),"\n",(0,o.jsx)(t.h3,{id:"file-paths",children:"File Paths"}),"\n",(0,o.jsxs)(t.p,{children:["You can decide which output files you want and where they should be written to. The file paths should be ",(0,o.jsx)(t.em,{children:"full filenames"}),", not just directories. Typically the actual filename doesn't matter and you can name them according your own preferences, the file extension is also not important and conventions can vary. The most important thing is for your Apache config to point to the correct files:"]}),"\n",(0,o.jsx)(t.h4,{id:"output-filepath-for-cert",children:"Output filepath for cert"}),"\n",(0,o.jsxs)(t.p,{children:["(optional) the full path to the file where the certificate (just your ",(0,o.jsx)(t.strong,{children:"Leaf Certificate"}),") will be exported to."]}),"\n",(0,o.jsxs)(t.p,{children:["Example: ",(0,o.jsx)(t.code,{children:"C:\\Program Files\\Apache Software Foundation\\Apache2.2\\conf\\mysite_cert\\cert.pem"})]}),"\n",(0,o.jsx)(t.h4,{id:"output-filepath-for-key",children:"Output filepath for key"}),"\n",(0,o.jsxs)(t.p,{children:["This is the output file for the ",(0,o.jsx)(t.strong,{children:"Private Key"}),". This file should be kept secure and not shared with anyone."]}),"\n",(0,o.jsxs)(t.p,{children:["Example: ",(0,o.jsx)(t.code,{children:"C:\\Program Files\\Apache Software Foundation\\Apache2.2\\conf\\mysite_cert\\privkey.pem"})]}),"\n",(0,o.jsx)(t.h4,{id:"output-filepath-for-full-chain",children:"Output filepath for full chain"}),"\n",(0,o.jsxs)(t.p,{children:["(optional) the full path to the file where the certificate ",(0,o.jsx)(t.strong,{children:"Full Chain"})," (your leaf certificate and any intermediate certificates) will be exported to."]}),"\n",(0,o.jsxs)(t.p,{children:["Example: ",(0,o.jsx)(t.code,{children:"C:\\Program Files\\Apache Software Foundation\\Apache2.2\\conf\\mysite_cert\\fullchain.pem"})]}),"\n",(0,o.jsx)(t.h4,{id:"output-filepath-for-ca-chain",children:"Output filepath for CA chain"}),"\n",(0,o.jsxs)(t.p,{children:["(optional) the full path to the file where the ",(0,o.jsx)(t.strong,{children:"CA Chain"})," (any intermediate certificates) will be exported to."]}),"\n",(0,o.jsxs)(t.p,{children:["Example: ",(0,o.jsx)(t.code,{children:"C:\\Program Files\\Apache Software Foundation\\Apache2.2\\conf\\mysite_cert\\ca-chain.pem"})]}),"\n",(0,o.jsx)(t.h2,{id:"apache-config",children:"Apache Config"}),"\n",(0,o.jsxs)(t.p,{children:["In a typical Apache config (2.4.8 or higher) you would only need to specify the ",(0,o.jsx)(t.strong,{children:"Full Chain"})," and the ",(0,o.jsx)(t.strong,{children:"Private Key"})," only. You then point to these files in your Apache config:"]}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["Point ",(0,o.jsx)(t.em,{children:"SSLCertificateKeyFile"})," at your ",(0,o.jsx)(t.strong,{children:"Private Key"})," file"]}),"\n",(0,o.jsxs)(t.li,{children:["Point ",(0,o.jsx)(t.em,{children:"SSLCertificateFile"})," at your ",(0,o.jsx)(t.strong,{children:"Full Chain"})," file"]}),"\n"]}),"\n",(0,o.jsxs)(t.p,{children:["For older versions of Apache you may need to specify the ",(0,o.jsx)(t.strong,{children:"CA Chain"})," file separately. In this case you would:"]}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["Point ",(0,o.jsx)(t.em,{children:"SSLCertificateKeyFile"})," at your ",(0,o.jsx)(t.strong,{children:"Private Key"})," file"]}),"\n",(0,o.jsxs)(t.li,{children:["Point ",(0,o.jsx)(t.em,{children:"SSLCertificateChainFile"})," at your ",(0,o.jsx)(t.strong,{children:"CA Chain"})," file,"]}),"\n",(0,o.jsxs)(t.li,{children:["Point ",(0,o.jsx)(t.em,{children:"SSLCertificateFile"})," at your ",(0,o.jsx)(t.strong,{children:"Leaf Certificate"})," file."]}),"\n"]}),"\n",(0,o.jsx)(t.h3,{id:"restarting-apache",children:"Restarting Apache"}),"\n",(0,o.jsxs)(t.p,{children:['For your changes to take effect you will need to restart Apache. You can do this by adding a *Stop, Start or Restart a Service" task after your ',(0,o.jsx)(t.em,{children:"Deploy to Apache"})," task."]}),"\n",(0,o.jsx)(t.h3,{id:"ca-preferred-chain",children:"CA Preferred Chain"}),"\n",(0,o.jsxs)(t.p,{children:["Some CAs offer alternative certificate chains for compatibility. Let's Encrypt offers both a ",(0,o.jsx)(t.em,{children:"DST Root CA X3"})," chain (expired) and a newer ",(0,o.jsx)(t.em,{children:"ISRG Root X1"})," chain. v6.x onwards of the app defaults to the newer chain for LE. If you need to use the older chain (e.g. for old Android compatibility) you can do so by setting the ",(0,o.jsx)(t.em,{children:"Preferred Chain"})," option under ",(0,o.jsx)(t.em,{children:"Certificate > Advanced > Certificate Authority - Preferred Chain"})," to ",(0,o.jsx)(t.em,{children:"DST Root CA X3"})," and re-requesting your certificate."]})]})}function d(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}},28453:(e,t,i)=>{i.d(t,{R:()=>a,x:()=>c});var n=i(96540);const o={},r=n.createContext(o);function a(e){const t=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),n.createElement(r.Provider,{value:t},e.children)}}}]);