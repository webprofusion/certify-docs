"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[9627],{85854:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>a,contentTitle:()=>c,default:()=>u,frontMatter:()=>n,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"guides/best-practices","title":"Best Practices","description":"Once you have setup your certificate and your website is accessible over https you could stop there and users will be able to access your website using a secure TLS (Transport Layer Security) connection (also known as it\'s old name, SSL).","source":"@site/docs/guides/best-practices.md","sourceDirName":"guides","slug":"/guides/best-practices","permalink":"/docs/guides/best-practices","draft":false,"unlisted":false,"editUrl":"https://github.com/webprofusion/certify-docs/edit/master/docs/guides/best-practices.md","tags":[],"version":"current","frontMatter":{"id":"best-practices","title":"Best Practices"},"sidebar":"docSidebar","previous":{"title":"DNS Domain Validation (dns-01)","permalink":"/docs/dns/validation"},"next":{"title":"Background Service","permalink":"/docs/backgroundservice"}}');var i=s(74848),o=s(28453);const n={id:"best-practices",title:"Best Practices"},c="Best Practices",a={},d=[{value:"Redirecting all visitors to HTTPS",id:"redirecting-all-visitors-to-https",level:2},{value:"Redirect to HTTP using IIS",id:"redirect-to-http-using-iis",level:3},{value:"Example rewrite rule to redirect http:// to https:// :",id:"example-rewrite-rule-to-redirect-http-to-https-",level:4},{value:"HTTP Strict Transport Security (HSTS)",id:"http-strict-transport-security-hsts",level:2},{value:"Is port 80 really a security risk?",id:"is-port-80-really-a-security-risk",level:2},{value:"Mixed Content Warnings",id:"mixed-content-warnings",level:2},{value:"Protocols and Cipher Suites",id:"protocols-and-cipher-suites",level:2},{value:"TLS Protocols",id:"tls-protocols",level:3},{value:"Cipher Suites",id:"cipher-suites",level:3},{value:"Protocol and Cipher Suite Configuration",id:"protocol-and-cipher-suite-configuration",level:3},{value:"Upgrade your operating system",id:"upgrade-your-operating-system",level:2},{value:"Disaster Recovery Planning",id:"disaster-recovery-planning",level:2}];function l(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"best-practices",children:"Best Practices"})}),"\n",(0,i.jsx)(t.p,{children:"Once you have setup your certificate and your website is accessible over https you could stop there and users will be able to access your website using a secure TLS (Transport Layer Security) connection (also known as it's old name, SSL)."}),"\n",(0,i.jsxs)(t.p,{children:["However, if you scan your website with a tool such as ",(0,i.jsx)(t.a,{href:"https://www.ssllabs.com/ssltest/",children:"https://www.ssllabs.com/ssltest/"})," it will likely point out a number of areas you could improve upon, many of which are quite cryptic. These include areas such as ",(0,i.jsx)(t.em,{children:"HTTP Strict Transport Security"})," (HSTS), ",(0,i.jsx)(t.em,{children:"Protocols"})," and ",(0,i.jsx)(t.em,{children:"Cipher Suites"}),"."]}),"\n",(0,i.jsx)(t.p,{children:"Even if you have a great automated score for security, your choice of operating system can be a security or operational risk and the way you manage your application lifecycle could be a risk to your organization."}),"\n",(0,i.jsx)(t.h2,{id:"redirecting-all-visitors-to-https",children:"Redirecting all visitors to HTTPS"}),"\n",(0,i.jsxs)(t.p,{children:["A user could try to access your site by just typing the domain or perhaps they will even type the full domain with ",(0,i.jsx)(t.code,{children:"https://"})," - whether the site loads as ",(0,i.jsx)(t.code,{children:"http://"})," or ",(0,i.jsx)(t.code,{children:"https://"}),' will depend on the web browser or the link the user followed, so in some cases users will see a site as "insecure". To avoid this, you can automatically direct the users browser to the HTTPS version of your site.']}),"\n",(0,i.jsx)(t.h3,{id:"redirect-to-http-using-iis",children:"Redirect to HTTP using IIS"}),"\n",(0,i.jsxs)(t.p,{children:["If you are using IIS on Windows, there are a few way to redirect users from http to https. The most common method uses the ",(0,i.jsx)(t.em,{children:"URL Rewrite"})," module ",(0,i.jsx)(t.a,{href:"https://docs.microsoft.com/en-us/iis/extensions/url-rewrite-module/using-the-url-rewrite-module",children:"https://docs.microsoft.com/en-us/iis/extensions/url-rewrite-module/using-the-url-rewrite-module"})," which is an extension to IIS which uses a web.config directive to rewrite http requests."]}),"\n",(0,i.jsxs)(t.p,{children:["In Windows Server 2022 you can select the ",(0,i.jsx)(t.code,{children:"Configure > HSTS.."})," option in IIS Manager which includes Http to Https redirection. Ensure you have working https before using this option."]}),"\n",(0,i.jsx)(t.h4,{id:"example-rewrite-rule-to-redirect-http-to-https-",children:"Example rewrite rule to redirect http:// to https:// :"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:'<?xml version="1.0" encoding="UTF-8"?>\n<configuration>\n    <system.webServer>\n        <rewrite>\n\n            \x3c!-- redirect to https rule --\x3e\n            <rules>\n                <rule name="Redirect HTTP to HTTPS" stopProcessing="true">\n                    <match url="(.*)" />\n                    <conditions>\n                        <add input="{HTTPS}" pattern="off" />\n                    </conditions>\n                    <action type="Redirect" url="https://{HTTP_HOST}/{R:1}" redirectType="Permanent" />\n                </rule>\n            </rules>\n\n        </rewrite>\n    </system.webServer>\n</configuration>\n\n'})}),"\n",(0,i.jsx)(t.h2,{id:"http-strict-transport-security-hsts",children:"HTTP Strict Transport Security (HSTS)"}),"\n",(0,i.jsxs)(t.p,{children:["One technique to encourage users to only use the ",(0,i.jsx)(t.code,{children:"https"})," version of your site is to add a special http header to your webserver responses, this tells their browser to remember that your site prefers to use https."]}),"\n",(0,i.jsxs)(t.p,{children:["As above, in Windows Server 2022 you can select the ",(0,i.jsx)(t.code,{children:"Configure > HSTS.."})," option in IIS Manager which includes Http to Https redirection."]}),"\n",(0,i.jsx)(t.p,{children:"For older versions of IIS and Windows Server you can configure the web application manually."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:'<?xml version="1.0" encoding="UTF-8"?>\n<configuration>\n    <system.webServer>\n        <rewrite>\n           \n           \x3c!-- add HTTP Strict Transport Security (HSTS) rule to outgoing headers --\x3e\n\n            <outboundRules>\n                <rule name="Add the STS header in HTTPS responses">\n                    <match serverVariable="RESPONSE_Strict_Transport_Security" pattern=".*" />\n                    <conditions>\n                        <add input="{HTTPS}" pattern="on" />\n                    </conditions>\n                    <action type="Rewrite" value="max-age=31536000" />\n                </rule>\n            </outboundRules>\n\n        </rewrite>\n    </system.webServer>\n</configuration>\n'})}),"\n",(0,i.jsxs)(t.p,{children:["For other related techniques for IIS, see ",(0,i.jsx)(t.a,{href:"https://docs.microsoft.com/en-us/iis/get-started/whats-new-in-iis-10-version-1709/iis-10-version-1709-hsts",children:"https://docs.microsoft.com/en-us/iis/get-started/whats-new-in-iis-10-version-1709/iis-10-version-1709-hsts"})]}),"\n",(0,i.jsx)(t.h2,{id:"is-port-80-really-a-security-risk",children:"Is port 80 really a security risk?"}),"\n",(0,i.jsx)(t.p,{children:"One common opinion amongst network administrators is that TCP port 80 (used for http) represents a security risk, therefore it is common to block this port, which in turns means you can't use HTTP validation for your certificate renewal process etc."}),"\n",(0,i.jsxs)(t.p,{children:["However, an open port does not directly affect your system security, it's the ",(0,i.jsx)(t.em,{children:"process listening to that port"})," which is the potential security risk. So when evaluating security best practice keep in mind the justification for each recommendation."]}),"\n",(0,i.jsx)(t.h2,{id:"mixed-content-warnings",children:"Mixed Content Warnings"}),"\n",(0,i.jsxs)(t.p,{children:["Whether you are using a custom built website or a content management system (WordPress etc) you may find that the browser still considers your website insecure, even though it's loading the main page over ",(0,i.jsx)(t.code,{children:"https"}),' with a valid certificate. This is often caused by "mixed content" e.g. some resources such as images, stylesheets or script being loaded using ',(0,i.jsx)(t.code,{children:"http"}),". To resolve this, change any referenced content in your site to only use ",(0,i.jsx)(t.code,{children:"https://"})," for content URLs."]}),"\n",(0,i.jsx)(t.h2,{id:"protocols-and-cipher-suites",children:"Protocols and Cipher Suites"}),"\n",(0,i.jsx)(t.h3,{id:"tls-protocols",children:"TLS Protocols"}),"\n",(0,i.jsxs)(t.p,{children:["A ",(0,i.jsx)(t.em,{children:"protocol"})," (such as TLS 1.2 or TLS 1.3) is a standard for the secured communication used during https requests to your server. Your server supports various protocols which may or may not be enabled and these will vary depending on your version of Windows, they will also vary depending on whether a request is being made to your server, or whether you server is making an outgoing request to something else."]}),"\n",(0,i.jsx)(t.p,{children:"Older protocols such as TLS 1.0 and TLS 1.1 are commonly disabled in modern configurations due to various security issues found in older versions, you may however still need to support them for old software accessing your site (this is up to you)."}),"\n",(0,i.jsx)(t.h3,{id:"cipher-suites",children:"Cipher Suites"}),"\n",(0,i.jsxs)(t.p,{children:["A ",(0,i.jsx)(t.em,{children:"cipher suite"})," is a set of agreed algorithms your system is willing to use to negotiate the secure TLS connection (see ",(0,i.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Cipher_suite",children:"https://en.wikipedia.org/wiki/Cipher_suite"}),'). Many older algorithms are now considered too weak or they are vulnerable to exploits and for these reasons may need to be disabled for your system to be considered "secure".']}),"\n",(0,i.jsx)(t.h3,{id:"protocol-and-cipher-suite-configuration",children:"Protocol and Cipher Suite Configuration"}),"\n",(0,i.jsxs)(t.p,{children:["TLS protocol and Cipher Suite support can be modified by changing values in the windows registry, but one commonly used free tool to make this simpler is ",(0,i.jsx)(t.em,{children:"IIS Crypto"})," by Nartac Software: ",(0,i.jsx)(t.a,{href:"https://www.nartac.com/Products/IISCrypto",children:"https://www.nartac.com/Products/IISCrypto"})]}),"\n",(0,i.jsxs)(t.p,{children:["On ",(0,i.jsx)(t.em,{children:"Windows Server 2016"}),' onwards you will likely find that applying the "Best Practices" mode of this tool is enough to improve your default TLS security. For ',(0,i.jsx)(t.em,{children:"Windows Server 2012 R2"})," and older your list of supported Cipher suites is more limited and you may need to enable a few additional cipher suites in order to ensure your server can still communicate properly with other services."]}),"\n",(0,i.jsx)(t.h2,{id:"upgrade-your-operating-system",children:"Upgrade your operating system"}),"\n",(0,i.jsx)(t.p,{children:"An unpatched operating system will be increasingly vulnerable to security issues and attacks."}),"\n",(0,i.jsx)(t.p,{children:"Certify The Web will no longer support any Microsoft OS after the end of it's official support lifecycle. If an OS version is not supported by Microsoft, it cannot be effectively supported by anyone else and you are at extreme risk of unpatched security vulnerabilities."}),"\n",(0,i.jsxs)(t.p,{children:["If you are running ",(0,i.jsx)(t.strong,{children:"Windows Server 2008 R2"})," or lower (including derivatives such as SBS 2011 etc) you should urgently move your applications to a new version of windows."]}),"\n",(0,i.jsxs)(t.p,{children:["If you are running ",(0,i.jsx)(t.strong,{children:"Windows Server 2012"}),", mainstream support from Microsoft ended in 2018 and if you are on extended support this will end in Oct 2023."]}),"\n",(0,i.jsxs)(t.p,{children:["Mainstream Microsoft support for ",(0,i.jsx)(t.strong,{children:"Windows Server 2016"})," ended in January 2022."]}),"\n",(0,i.jsx)(t.h2,{id:"disaster-recovery-planning",children:"Disaster Recovery Planning"}),"\n",(0,i.jsxs)(t.p,{children:['It\'s very common for organizations to consider their apps as being "too difficult" to move to newer operating systems. This is a critical risk for your system and if your service is ',(0,i.jsx)(t.em,{children:"business critical"})," (i.e. your business cannot effectively operate without it) then it's also a high priority risk to your business. If you ",(0,i.jsx)(t.em,{children:"cannot"})," move an app (because you don't really know how), consider whether you can even restore it if the server fails and the impact to your organization if that happens."]}),"\n",(0,i.jsxs)(t.p,{children:["Write a simply worded document that you can hand to a competent IT administrator (they should not have to know the system or how it works beforehand) that lets them recover your system to a new server. The document should summarize what the system does, how it's put together and most importantly how to set it all up again to the point where users can start using it. ",(0,i.jsx)(t.strong,{children:"Exercise the plan by getting someone else to setup a test system using your document."})]})]})}function u(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},28453:(e,t,s)=>{s.d(t,{R:()=>n,x:()=>c});var r=s(96540);const i={},o=r.createContext(i);function n(e){const t=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:n(e.components),r.createElement(o.Provider,{value:t},e.children)}}}]);