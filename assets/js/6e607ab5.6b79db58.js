"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[9109],{89297:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"hub/guides/ccm","title":"Certify Certificate Manager (Desktop)","description":"Summary","source":"@site/docs/hub/guides/ccm.md","sourceDirName":"hub/guides","slug":"/hub/guides/ccm","permalink":"/docs/hub/guides/ccm","draft":false,"unlisted":false,"editUrl":"https://github.com/webprofusion/certify-docs/edit/master/docs/hub/guides/ccm.md","tags":[],"version":"current","frontMatter":{"title":"Certify Certificate Manager (Desktop)"},"sidebar":"hubDocSidebar","previous":{"title":"Managed ACME Service","permalink":"/docs/hub/guides/acme-server"},"next":{"title":"Certify Management Agent (Linux, macOS)","permalink":"/docs/hub/guides/agent"}}');var s=i(74848),r=i(28453);const o={title:"Certify Certificate Manager (Desktop)"},a=void 0,c={},l=[{value:"Summary",id:"summary",level:2},{value:"Before Joining the Hub",id:"before-joining-the-hub",level:2},{value:"Security Considerations",id:"security-considerations",level:3},{value:"Joining the Hub",id:"joining-the-hub",level:2},{value:"Method 1: Using the Desktop User Interface",id:"method-1-using-the-desktop-user-interface",level:3},{value:"Method 2: Using the Command Line",id:"method-2-using-the-command-line",level:3},{value:"Verification",id:"verification",level:2},{value:"Other Considerations",id:"other-considerations",level:2},{value:"Setting up additional joining keys",id:"setting-up-additional-joining-keys",level:2},{value:"1. Add a Security Principal for Managed Instances",id:"1-add-a-security-principal-for-managed-instances",level:3},{value:"2. Create an API Key for Joining Instances",id:"2-create-an-api-key-for-joining-instances",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,s.jsxs)(n.p,{children:["Joining your existing ",(0,s.jsx)(n.em,{children:"Certify Certificate Manager"})," (CCM) instance to a Management Hub allows you to control the instance settings as if you were working in the conventional desktop app, without having to remote into the desktop of each instance."]}),"\n",(0,s.jsxs)(n.p,{children:["If you are using ",(0,s.jsx)(n.em,{children:"Certify Management Agent"})," on Linux or macOS, ",(0,s.jsx)(n.a,{href:"/docs/hub/guides/agent",children:"see our agent guide"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Start by ",(0,s.jsx)(n.a,{href:"https://downloads.certifytheweb.com/beta/latest/certify-ccm-windows-x64-latest.exe",children:"downloading the latest version"})," of Certify Certificate Manager (v7+) with the option to connect to a management hub."]}),"\n",(0,s.jsx)(n.p,{children:"To use Certify Management Hub with existing installations:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Set up a Joining API key in the hub (one is automatically created when the hub is installed)."}),"\n",(0,s.jsx)(n.li,{children:"Configure CCM to join the hub (via UI or command line)"}),"\n",(0,s.jsx)(n.li,{children:"Verify that the joining has completed in the hub UI"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"before-joining-the-hub",children:"Before Joining the Hub"}),"\n",(0,s.jsx)(n.h3,{id:"security-considerations",children:"Security Considerations"}),"\n",(0,s.jsxs)(n.admonition,{title:"Important",type:"warning",children:[(0,s.jsx)(n.p,{children:"The management hub will have complete control over the Certify Certificate Manager instance settings, including the ability to specify deployment tasks which may include locally executed code (PowerShell etc)."}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Do not join a hub you don't control or trust."})})]}),"\n",(0,s.jsx)(n.h2,{id:"joining-the-hub",children:"Joining the Hub"}),"\n",(0,s.jsxs)(n.p,{children:["By default a joining API key is created when you install the hub. This is found under ",(0,s.jsx)(n.em,{children:"Settings > Security > API Access"}),". You will need the API URL (e.g. ",(0,s.jsx)(n.code,{children:"https://hub.internal.yourdomain.com:9697"})," depending on your configuration), Client Id and Client Secret values."]}),"\n",(0,s.jsx)(n.h3,{id:"method-1-using-the-desktop-user-interface",children:"Method 1: Using the Desktop User Interface"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["In ",(0,s.jsx)(n.em,{children:"Certify Certificate Manager"}),", go to ",(0,s.jsx)(n.strong,{children:"Settings > Management Hub"})]}),"\n",(0,s.jsxs)(n.li,{children:["Enter the following:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Management Hub API URL"}),"\n",(0,s.jsx)(n.li,{children:"Client ID"}),"\n",(0,s.jsx)(n.li,{children:"Client Secret"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Click ",(0,s.jsx)(n.strong,{children:"Join"})]}),"\n",(0,s.jsx)(n.li,{children:"The app will attempt to join the management hub"}),"\n",(0,s.jsxs)(n.li,{children:["If successful, the instance will appear in the ",(0,s.jsx)(n.strong,{children:"Instances"})," list of the Management Hub UI and managed certificates will be shown in the hub."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"method-2-using-the-command-line",children:"Method 2: Using the Command Line"}),"\n",(0,s.jsxs)(n.p,{children:["If you need to automate joining for a large number of instances you may prefer to script using the command line. To do so, run the following command (from ",(0,s.jsx)(n.code,{children:"C:\\Program Files\\CertifyTheWeb\\"})," as a member of Administrators):"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"certify hub join <url of mgmt hub API> <client id> <client secret>\n"})}),"\n",(0,s.jsx)(n.h2,{id:"verification",children:"Verification"}),"\n",(0,s.jsxs)(n.p,{children:["After joining, confirm that your instance appears in the Management Hub UI's ",(0,s.jsx)(n.strong,{children:"Instances"})," list."]}),"\n",(0,s.jsx)(n.h1,{id:"using-the-hub-to-manage-a-ccm-instance",children:"Using the Hub to manage a CCM instance"}),"\n",(0,s.jsxs)(n.p,{children:["Your existing ",(0,s.jsx)(n.em,{children:"Certify Certificate Manager"})," install remains much the same as it was before, except it can also be externally managed via the hub. When you are working with individual settings such as Stored Credentials, Certificate Authority accounts etc these remain per-instance settings, so each instance of the app has it's own set of settings and you will selected the target instance when working with those."]}),"\n",(0,s.jsx)(n.p,{children:"The hub does not currently have global settings that can be pushed to all managed instances etc (such as a single ACME account, or specific stored credential)."}),"\n",(0,s.jsx)(n.h2,{id:"other-considerations",children:"Other Considerations"}),"\n",(0,s.jsx)(n.h2,{id:"setting-up-additional-joining-keys",children:"Setting up additional joining keys"}),"\n",(0,s.jsx)(n.p,{children:"If you manage instances across different organizations (e.g. if you are an MSP etc), consider creating multiple joining keys to partition by organization. This allows you to revoke hub access for specific groups without affecting unrelated instances."}),"\n",(0,s.jsx)(n.h3,{id:"1-add-a-security-principal-for-managed-instances",children:"1. Add a Security Principal for Managed Instances"}),"\n",(0,s.jsx)(n.p,{children:"This step may be unnecessary in current versions where it's auto-created."}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["In the hub, navigate to ",(0,s.jsx)(n.strong,{children:"Security > Users"})]}),"\n",(0,s.jsxs)(n.li,{children:["Click ",(0,s.jsx)(n.strong,{children:"Add New Security Principal"})]}),"\n",(0,s.jsxs)(n.li,{children:["Configure as follows:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Type"}),": Application/Service"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Title"}),': "Hub Managed Instance"']}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Description"}),': "Principal for Management Hub Instance Joining"']}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["After adding, click the ",(0,s.jsx)(n.strong,{children:"Roles icon"})," (People+ icon) next to the new security principal's ID"]}),"\n",(0,s.jsxs)(n.li,{children:["Select the ",(0,s.jsx)(n.code,{children:"Management Hub Managed Instance"})," role from Available Roles"]}),"\n",(0,s.jsxs)(n.li,{children:["Click ",(0,s.jsx)(n.strong,{children:"Save"})]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"2-create-an-api-key-for-joining-instances",children:"2. Create an API Key for Joining Instances"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Navigate to ",(0,s.jsx)(n.strong,{children:"Settings > Security > API Access"})]}),"\n",(0,s.jsxs)(n.li,{children:["Click ",(0,s.jsx)(n.strong,{children:"Add API Token"})]}),"\n",(0,s.jsxs)(n.li,{children:["Select ",(0,s.jsx)(n.strong,{children:"Managed Instances Service Principal"})]}),"\n",(0,s.jsxs)(n.li,{children:["Enter ",(0,s.jsx)(n.strong,{children:"Instance Joining Key"})," as the title"]}),"\n",(0,s.jsxs)(n.li,{children:["Select ",(0,s.jsx)(n.strong,{children:"Management Hub Managed Instance"})," as the scoped role","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Important:"})," Click ",(0,s.jsx)(n.strong,{children:"Add/Remove Role Scope"})," to add it to the scope list"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Click ",(0,s.jsx)(n.strong,{children:"Add"})," to create the new API token"]}),"\n",(0,s.jsxs)(n.li,{children:["Copy the ",(0,s.jsx)(n.strong,{children:"Client ID"})," and ",(0,s.jsx)(n.strong,{children:"Secret"})," values - you'll need these for instance configuration"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>a});var t=i(96540);const s={},r=t.createContext(s);function o(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);