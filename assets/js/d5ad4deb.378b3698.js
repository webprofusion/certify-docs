"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7924],{6390:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>c,default:()=>d,frontMatter:()=>o,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"hub/installation/service","title":"Hub Service Config","description":"Port and TLS Certificate","source":"@site/docs/hub/installation/service.md","sourceDirName":"hub/installation","slug":"/hub/installation/service","permalink":"/docs/hub/installation/service","draft":false,"unlisted":false,"editUrl":"https://github.com/webprofusion/certify-docs/edit/master/docs/hub/installation/service.md","tags":[],"version":"current","frontMatter":{"title":"Hub Service Config"}}');var r=n(74848),s=n(28453);const o={title:"Hub Service Config"},c=void 0,a={},l=[{value:"Port and TLS Certificate",id:"port-and-tls-certificate",level:2}];function h(e){const t={a:"a",code:"code",em:"em",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h2,{id:"port-and-tls-certificate",children:"Port and TLS Certificate"}),"\n",(0,r.jsxs)(t.p,{children:["By default the hub service will initially be created on ",(0,r.jsx)(t.code,{children:"http://localhost:8080"})," which generally means it can't be used from other machines and it also doesn't have https enabled (the irony!)."]}),"\n",(0,r.jsxs)(t.p,{children:["A default sample config is created at ",(0,r.jsx)(t.code,{children:"C:\\ProgramData\\certify\\hubservice.json"})," or ",(0,r.jsx)(t.code,{children:"/usr/share/certify/hubservice.json"})," and this allows you to customise the http listener, which is a .net Kestrel web server:"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.a,{href:"https://learn.microsoft.com/en-us/aspnet/core/fundamentals/servers/kestrel/endpoints?view=aspnetcore-9.0",children:"https://learn.microsoft.com/en-us/aspnet/core/fundamentals/servers/kestrel/endpoints?view=aspnetcore-9.0"})}),"\n",(0,r.jsx)(t.p,{children:"An example config is included in the file to use a PFX file, so to setup https:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Decide on your preferred fully qualified service name for the hub, e.g. ",(0,r.jsx)(t.code,{children:"certifyhub.intranet.yourdomain.com"})]}),"\n",(0,r.jsx)(t.li,{children:"Use the management hub to acquire a certificate for the service name you need, using the normal certificate request process."}),"\n",(0,r.jsxs)(t.li,{children:["Add a Deployment Task (",(0,r.jsx)(t.em,{children:"Export Certificate"}),") to export a PFX (PKCS#12) file to where it's required e.g. C:\\ProgramData\\certify\\internal-certs\\hub.pfx , then run the task to export the initial certificate."]}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:["Once you have a cert on disk you are ready to configure the service to use that cert file, edit the ",(0,r.jsx)(t.code,{children:"hubservice.json"})," file to include the ",(0,r.jsx)(t.code,{children:"HttpsInlineCertFile"})," entry. The choice of port and filename etc is arbitrary, as long as the process can access the file.:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-json",children:'  "Kestrel": {\n    "Endpoints": {\n      "SvcHttpEndpoint": {\n        "Url": "http://0.0.0.0:8080"\n      },\n      "HttpsInlineCertFile": {\n        "Url": "https://0.0.0.0:9697",\n        "Certificate": {\n          "Path": "C:\\\\ProgramData\\\\certify\\\\internal-certs\\\\hub.pfx",\n          "Password": ""\n        }\n      }\n    }\n  }\n'})}),"\n",(0,r.jsxs)(t.p,{children:["Then restart the ",(0,r.jsx)(t.code,{children:"Certify Management Hub"})," service, you can then access the service via https at the port you specified e.g. ",(0,r.jsx)(t.code,{children:"https://certifyhub.intranet.yourdomain.com:9697"})," - do not expose your installation (e.g. open the port) to the public internet."]}),"\n",(0,r.jsx)(t.p,{children:"This is an example configuration, so you can configure the endpoints and certificates however you prefer."}),"\n",(0,r.jsx)(t.p,{children:"Note that when using the app remotely the UI (e.g. via Tailscale etc) may take a while to load the WASM files etc for the first time, subsequent loads are much faster."})]})}function d(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>c});var i=n(96540);const r={},s=i.createContext(r);function o(e){const t=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(s.Provider,{value:t},e.children)}}}]);